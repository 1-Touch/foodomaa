(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{143:function(e,t,a){"use strict";var r=a(3),n=a(4),o=a(6),i=a(5),s=a(7),l=a(0),c=a.n(l),u=a(15),d=a.n(u),m=a(144),p=a.n(m),f=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"col-12 p-0 fixed",style:{zIndex:"9"}},c.a.createElement("div",{className:"block m-0"},c.a.createElement("div",{className:"block-content p-0"},c.a.createElement("div",{className:"input-group ".concat(this.props.boxshadow&&"search-box")},!this.props.disable_back_button&&c.a.createElement("div",{className:"input-group-prepend"},this.props.back_to_home&&c.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){return e.context.router.history.push("/")}},c.a.createElement("i",{className:"si si-arrow-left"}),c.a.createElement(d.a,{duration:"500"})),this.props.goto_orders_page&&c.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){return e.context.router.history.push("/my-orders")}},c.a.createElement("i",{className:"si si-arrow-left"}),c.a.createElement(d.a,{duration:"500"})),this.props.goto_accounts_page&&c.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){return e.context.router.history.push("/my-account")}},c.a.createElement("i",{className:"si si-arrow-left"}),c.a.createElement(d.a,{duration:"500"})),!this.props.back_to_home&&!this.props.goto_orders_page&&!this.props.goto_accounts_page&&c.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:this.context.router.history.goBack},c.a.createElement("i",{className:"si si-arrow-left"}),c.a.createElement(d.a,{duration:"500"}))),c.a.createElement("p",{className:"form-control search-input"},this.props.logo&&c.a.createElement("img",{src:"/assets/img/logos/logo.png",alt:localStorage.getItem("storeName"),width:"120"}),this.props.has_title?c.a.createElement("span",{className:"nav-page-title"},this.props.title):null,this.props.has_delivery_icon&&c.a.createElement(p.a,{left:!0},c.a.createElement("img",{src:"/assets/img/various/delivery-bike.png",alt:this.props.title,className:"nav-page-title"}))),this.props.has_restaurant_info?c.a.createElement("div",{className:"fixed-restaurant-info hidden",ref:function(t){e.heading=t}},c.a.createElement("span",{className:"font-w700 fixedRestaurantName"},this.props.restaurant.name),c.a.createElement("br",null),c.a.createElement("span",{className:"font-w400 fixedRestaurantTime"},c.a.createElement("i",{className:"si si-clock"})," ",this.props.restaurant.delivery_time," ",localStorage.getItem("homePageMinsText"))):null,c.a.createElement("div",{className:"input-group-append"},!this.props.disable_search&&c.a.createElement("button",{type:"submit",className:"btn search-navs-btns",style:{position:"relative"}},c.a.createElement("i",{className:"si si-magnifier"}),c.a.createElement(d.a,{duration:"500"}))))))))}}]),t}(l.Component);f.contextTypes={router:function(){return null}},t.a=f},144:function(e,t,a){"use strict";function r(e,t){var a=t.left,r=t.right,n=t.mirror,o=t.opposite,i=(a?1:0)|(r?2:0)|(n?16:0)|(o?32:0)|(e?64:0);if(d.hasOwnProperty(i))return d[i];if(!n!=!(e&&o)){var s=[r,a];a=s[0],r=s[1]}var l=a?"-100%":r?"100%":"0",u=e?"from {\n        opacity: 1;\n      }\n      to {\n        transform: translate3d("+l+", 0, 0) skewX(30deg);\n        opacity: 0;\n      }\n    ":"from {\n        transform: translate3d("+l+", 0, 0) skewX(-30deg);\n        opacity: 0;\n      }\n      60% {\n        transform: skewX(20deg);\n        opacity: 1;\n      }\n      80% {\n        transform: skewX(-5deg);\n        opacity: 1;\n      }\n      to {\n        transform: none;\n        opacity: 1;\n      }";return d[i]=(0,c.animation)(u),d[i]}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.defaults,t=e.children,a=(e.out,e.forever),n=e.timeout,o=e.duration,i=void 0===o?c.defaults.duration:o,l=e.delay,u=void 0===l?c.defaults.delay:l,d=e.count,m=void 0===d?c.defaults.count:d,p=function(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}(e,["children","out","forever","timeout","duration","delay","count"]),f={make:r,duration:void 0===n?i:n,delay:u,forever:a,count:m,style:{animationFillMode:"both"}};return p.left,p.right,p.mirror,p.opposite,(0,s.default)(p,f,f,t)}Object.defineProperty(t,"__esModule",{value:!0});var o,i=a(53),s=(o=i)&&o.__esModule?o:{default:o},l=a(1),c=a(39),u={out:l.bool,left:l.bool,right:l.bool,mirror:l.bool,opposite:l.bool,duration:l.number,timeout:l.number,delay:l.number,count:l.number,forever:l.bool},d={};n.propTypes=u,t.default=n,e.exports=t.default},149:function(e,t,a){var r;!function(){"use strict";var a={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var i=n.apply(null,r);i&&e.push(i)}else if("object"===o)for(var s in r)a.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}"undefined"!==typeof e&&e.exports?(n.default=n,e.exports=n):void 0===(r=function(){return n}.apply(t,[]))||(e.exports=r)}()},223:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),n=a(0),o=l(n),i=l(a(1)),s=l(a(149));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={value:e.value},a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.Component),r(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.value;null!=t&&t!==this.state.value&&this.setState({value:t})}},{key:"onChange",value:function(e){var t=this.props,a=t.editing,r=t.value;a&&null==r&&this.setState({value:e})}},{key:"onStarClick",value:function(e,t,a,r){r.stopPropagation();var n=this.props,o=n.onStarClick;n.editing&&o&&o(e,t,a,r)}},{key:"onStarHover",value:function(e,t,a,r){r.stopPropagation();var n=this.props,o=n.onStarHover;n.editing&&o&&o(e,t,a,r)}},{key:"onStarHoverOut",value:function(e,t,a,r){r.stopPropagation();var n=this.props,o=n.onStarHoverOut;n.editing&&o&&o(e,t,a,r)}},{key:"renderStars",value:function(){for(var e=this,t=this.props,a=t.name,r=t.starCount,n=t.starColor,i=t.emptyStarColor,s=t.editing,l=this.state.value,c=function(e,t){return{float:"right",cursor:s?"pointer":"default",color:t>=e?n:i}},u={display:"none",position:"absolute",marginLeft:-9999},d=[],m=function(t){var r=a+"_"+t,n=o.default.createElement("input",{key:"input_"+r,style:u,className:"dv-star-rating-input",type:"radio",name:a,id:r,value:t,checked:l===t,onChange:e.onChange.bind(e,t,a)}),i=o.default.createElement("label",{key:"label_"+r,style:c(t,l),className:"dv-star-rating-star "+(l>=t?"dv-star-rating-full-star":"dv-star-rating-empty-star"),htmlFor:r,onClick:function(r){return e.onStarClick(t,l,a,r)},onMouseOver:function(r){return e.onStarHover(t,l,a,r)},onMouseLeave:function(r){return e.onStarHoverOut(t,l,a,r)}},e.renderIcon(t,l,a,r));d.push(n),d.push(i)},p=r;p>0;p--)m(p);return d.length?d:null}},{key:"renderIcon",value:function(e,t,a,r){var n=this.props,i=n.renderStarIcon,s=n.renderStarIconHalf;return"function"===typeof s&&Math.ceil(t)===e&&t%1!==0?s(e,t,a,r):"function"===typeof i?i(e,t,a,r):o.default.createElement("i",{key:"icon_"+r,style:{fontStyle:"normal"}},"\u2605")}},{key:"render",value:function(){var e=this.props,t=e.editing,a=e.className,r=(0,s.default)("dv-star-rating",{"dv-star-rating-non-editable":!t},a);return o.default.createElement("div",{style:{display:"inline-block",position:"relative"},className:r},this.renderStars())}}]),t}();c.propTypes={name:i.default.string.isRequired,value:i.default.number,editing:i.default.bool,starCount:i.default.number,starColor:i.default.string,onStarClick:i.default.func,onStarHover:i.default.func,onStarHoverOut:i.default.func,renderStarIcon:i.default.func,renderStarIconHalf:i.default.func},c.defaultProps={starCount:5,editing:!0,starColor:"#ffb400",emptyStarColor:"#333"},t.default=c,e.exports=t.default},249:function(e,t,a){"use strict";a.r(t);var r=a(3),n=a(4),o=a(6),i=a(5),s=a(7),l=a(0),c=a.n(l),u=a(223),d=a.n(u),m=a(62),p=a(11),f=a(10),g=a.n(f),v=a(14),h=a(143),b=a(253);a.d(t,"RateAndReview",function(){return y});var y=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={loading:!0,restaurant_rating:0,delivery_rating:0,comment:"",order_id:a.props.match.params.id,user_id:"",auth_token:"",required_error:!1,completed:!1},a.onFoodRating=function(e,t,r){a.setState({restaurant_rating:e})},a.onDeliveryRating=function(e,t,r){a.setState({delivery_rating:e})},a.feedbackComment=function(e){e.preventDefault(),a.setState({comment:e.target.value})},a.submitRating=function(){0===a.state.delivery_rating||0===a.state.restaurant_rating?a.setState({required_error:!0}):(a.props.addRating(a.state),a.setState({restaurant_rating:0,delivery_rating:0,comment:""}))},a}return Object(s.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){this.props.user.success&&(this.setState({user_id:this.props.user.data.id,auth_token:this.props.user.data.auth_token}),this.props.getOrderDetails(this.props.match.params.id,this.props.user.data.id,this.props.user.data.auth_token))}},{key:"componentWillReceiveProps",value:function(e){this.props.rating_details!==e.rating_details&&(e.rating_details.success&&this.setState({loading:!1}),e.rating_details.success||(console.log("Order not found"),this.context.router.history.push("/"))),this.props.done_rating!==e.done_rating&&e.done_rating.success&&(this.setState({loading:!1,required_error:!1,completed:!0}),console.log("Rating done. Redirect to home"),setTimeout(function(){},5e3))}},{key:"render",value:function(){var e=this.state,t=e.restaurant_rating,a=e.delivery_rating;return window.innerWidth>768?c.a.createElement(b.a,{to:"/"}):null===localStorage.getItem("storeColor")?c.a.createElement(b.a,{to:"/"}):this.props.user.success?c.a.createElement(c.a.Fragment,null,this.state.required_error&&c.a.createElement("div",{className:"auth-error mb-50"},c.a.createElement("div",{className:"error-shake"},"Ratings are required")),this.state.loading&&c.a.createElement("div",{className:"height-100 overlay-loading"},c.a.createElement("div",null,c.a.createElement("img",{src:"/assets/img/loading-food.gif",alt:localStorage.getItem("pleaseWaitText")}))),c.a.createElement("div",{className:"col-12 p-0 mb-5"},c.a.createElement(h.a,{boxshadow:!0,has_title:!0,title:localStorage.getItem("rarModRatingPageTitle"),disable_search:!0,goto_accounts_page:!0})),this.state.completed?c.a.createElement("div",{className:"d-flex justify-content-center pt-80"},c.a.createElement("img",{src:"/assets/img/order-placed.gif",alt:"Completed",className:"img-fluid w-50"})):c.a.createElement(c.a.Fragment,null,c.a.createElement("img",{src:"/assets/img/various/review-bg.png",alt:"review",className:"img-fluid review-screen-bg"}),c.a.createElement("div",{className:"block-content block-content-full pt-80 px-15"},c.a.createElement("form",{className:"rating-form"},c.a.createElement("div",{className:"form-group pt-30 mb-0"},c.a.createElement("label",{className:"col-12 text-muted"},localStorage.getItem("rarModDeliveryRatingTitle")),c.a.createElement("div",{className:"col-md-9 pb-5"},c.a.createElement(d.a,{name:"restaurant_rating",starCount:5,value:t,onStarClick:this.onFoodRating}))),c.a.createElement("div",{className:"form-group mb-0"},c.a.createElement("label",{className:"col-12 text-muted"},localStorage.getItem("rarModRestaurantRatingTitle")),c.a.createElement("div",{className:"col-md-9 pb-5"},c.a.createElement(d.a,{name:"delivery_rating",starCount:5,value:a,onStarClick:this.onDeliveryRating}))),c.a.createElement("div",{className:"form-group mb-0"},c.a.createElement("label",{className:"col-12 text-muted"},localStorage.getItem("rarReviewBoxTitle")),c.a.createElement("div",{className:"col-md-9 pb-5"},c.a.createElement("textarea",{placeholder:localStorage.getItem("rarReviewBoxTextPlaceHolderText"),value:this.state.comment,onChange:this.feedbackComment,className:"feedback-textarea"}))),c.a.createElement("button",{className:"btn-fixed-bottom",style:{backgroundColor:localStorage.getItem("storeColor")},onClick:this.submitRating,type:"button"},localStorage.getItem("rarSubmitButtonText")))))):c.a.createElement(b.a,{to:"/login"})}}]),t}(l.Component);y.contextTypes={router:function(){return null}};t.default=Object(v.b)(function(e){return{user:e.user.user,rating_details:e.rating.rating_details,done_rating:e.rating.done_rating}},{addRating:function(e){return function(t){g.a.post(p.b,{restaurant_rating:e.restaurant_rating,delivery_rating:e.delivery_rating,comment:e.comment,order_id:e.order_id,user_id:e.user_id,token:e.auth_token}).then(function(e){var a=e.data;return t({type:m.a,payload:a})}).catch(function(e){console.log(e)})}},getOrderDetails:function(e,t,a){return function(r){g.a.post(p.w,{order_id:e,user_id:t,token:a}).then(function(e){var t=e.data;return r({type:m.b,payload:t})}).catch(function(e){console.log(e)})}}})(y)}}]);