(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{159:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i}),a.d(t,"d",function(){return g}),a.d(t,"c",function(){return c});var n=a(35),l=a(11),r=a(10),o=a.n(r),s=function(e,t){return function(a){o.a.post(l.K,{email:e,password:t}).then(function(e){var t=e.data;return a({type:n.a,payload:t})}).catch(function(e){console.log(e)})}},i=function(e){return function(t){e=[],t({type:n.b,payload:e})}},g=function(e,t){return function(a){o.a.post(l.Z,{token:t,user_id:e}).then(function(e){var t={delivery_user:e.data,order_history:e.data.data.orders};return a({type:n.d,payload:t})}).catch(function(e){console.log(e)})}},c=function(e){return function(t){t({type:n.c,payload:e})}}},233:function(e,t,a){"use strict";a.r(t);var n=a(3),l=a(4),r=a(6),o=a(5),s=a(7),i=a(0),g=a.n(i),c=a(25),u=a(253),m=a(14),d=a(21),p=a(159),f=a(20),h=function(e){function t(){var e,a;Object(n.a)(this,t);for(var l=arguments.length,s=new Array(l),i=0;i<l;i++)s[i]=arguments[i];return(a=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).state={loading:!1,email:"",password:"",error:!1},a.handleOnChange=function(e){a.props.getSingleLanguageData(e.target.value),localStorage.setItem("userPreferedLanguage",e.target.value)},a.handleInputEmail=function(e){a.setState({email:e.target.value})},a.handleInputPassword=function(e){a.setState({password:e.target.value})},a.handleLogin=function(e){e.preventDefault(),a.setState({loading:!0}),a.props.loginDeliveryUser(a.state.email,a.state.password)},a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getSettings(),setTimeout(function(){e.setState({error:!1})},380),this.props.getAllLanguages()}},{key:"componentWillReceiveProps",value:function(e){if(this.props.delivery_user!==e.delivery_user&&this.setState({loading:!1}),e.delivery_user.success,"false"===e.delivery_user.success&&this.setState({error:!0}),this.props.languages!==e.languages)if(localStorage.getItem("userPreferedLanguage"))this.props.getSingleLanguageData(localStorage.getItem("userPreferedLanguage"));else if(e.languages.length){var t=e.languages.filter(function(e){return 1===e.is_default})[0].id;this.props.getSingleLanguageData(t)}}},{key:"render",value:function(){return window.innerWidth>768?g.a.createElement(u.a,{to:"/"}):this.props.delivery_user.success?g.a.createElement(u.a,{to:"/delivery"}):g.a.createElement(g.a.Fragment,null,g.a.createElement(c.a,{seotitle:"Login",seodescription:localStorage.getItem("seoMetaDescription"),ogtype:"website",ogtitle:localStorage.getItem("seoOgTitle"),ogdescription:localStorage.getItem("seoOgDescription"),ogurl:window.location.href,twittertitle:localStorage.getItem("seoTwitterTitle"),twitterdescription:localStorage.getItem("seoTwitterDescription")}),g.a.createElement("img",{src:"/assets/img/loading-food.gif",className:"hidden",alt:"prefetching"}),this.state.error&&g.a.createElement("div",{className:"auth-error"},g.a.createElement("div",{className:"error-shake"},localStorage.getItem("loginErrorMessage"))),this.state.loading&&g.a.createElement("div",{className:"height-100 overlay-loading"},g.a.createElement("div",null,g.a.createElement("img",{src:"/assets/img/loading-food.gif",alt:localStorage.getItem("pleaseWaitText")}))),g.a.createElement("div",{style:{backgroundColor:"#f2f4f9"}},g.a.createElement("div",{className:"input-group"},g.a.createElement("div",{className:"input-group-prepend"},g.a.createElement("div",{style:{height:"3.5rem"}}))),g.a.createElement("img",{src:"/assets/img/login-header.png",className:"login-image pull-right mr-15",alt:"login-header"}),g.a.createElement("div",{className:"login-texts px-15 mt-50 pb-20"},g.a.createElement("span",{className:"login-title"},localStorage.getItem("loginLoginTitle")),g.a.createElement("br",null),g.a.createElement("span",{className:"login-subtitle"},localStorage.getItem("loginLoginSubTitle")))),g.a.createElement("div",{className:"height-70 bg-white"},g.a.createElement("form",{onSubmit:this.handleLogin},g.a.createElement("div",{className:"form-group px-15 pt-30"},g.a.createElement("label",{className:"col-12 edit-address-input-label"},localStorage.getItem("loginLoginEmailLabel")),g.a.createElement("div",{className:"col-md-9 pb-5"},g.a.createElement("input",{type:"text",name:"email",onChange:this.handleInputEmail,className:"form-control edit-address-input"})),g.a.createElement("label",{className:"col-12 edit-address-input-label"},localStorage.getItem("loginLoginPasswordLabel")),g.a.createElement("div",{className:"col-md-9"},g.a.createElement("input",{type:"password",name:"password",onChange:this.handleInputPassword,className:"form-control edit-address-input"}))),g.a.createElement("div",{className:"mt-20 px-15 pt-15 button-block"},g.a.createElement("button",{type:"submit",className:"btn btn-main",style:{backgroundColor:localStorage.getItem("storeColor")}},localStorage.getItem("loginLoginTitle")))),this.props.languages&&this.props.languages.length>1&&g.a.createElement("div",{className:"mt-100 d-flex align-items-center justify-content-center"},g.a.createElement("div",{className:"mr-2"},localStorage.getItem("changeLanguageText")),g.a.createElement("select",{onChange:this.handleOnChange,defaultValue:localStorage.getItem("userPreferedLanguage")?localStorage.getItem("userPreferedLanguage"):this.props.languages.filter(function(e){return 1===e.is_default})[0].id,className:"form-control language-select"},this.props.languages.map(function(e){return g.a.createElement("option",{value:e.id,key:e.id},e.language_name)})))))}}]),t}(i.Component);h.contextTypes={router:function(){return null}};t.default=Object(m.b)(function(e){return{delivery_user:e.delivery_user.delivery_user,languages:e.languages.languages,language:e.languages.language}},{loginDeliveryUser:p.a,getSettings:d.a,getAllLanguages:f.a,getSingleLanguageData:f.b})(h)}}]);